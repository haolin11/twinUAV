Metadata-Version: 2.4
Name: twinuav
Version: 0.2.0
Summary: Genesis + Stereo + 3DGS UAV digital twin and data factory
Author: Your Name
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy
Requires-Dist: pyyaml
Requires-Dist: plyfile
Provides-Extra: render
Requires-Dist: torch; extra == "render"
Provides-Extra: test
Requires-Dist: pytest; extra == "test"
Dynamic: license-file

# UAV-3DGS-Genesis

室内无人机数字孪生与数据工厂：Genesis 仿真 + 双目相机 + 3DGS 渲染 + 3D 体素地图 + 3维混合 A* + 规则触发采集 + ROS Noetic 桥接 VINS-Fusion。

## 项目目标
- **Real→Sim**：用 3DGS 还原真实室内，获得高逼真的视觉帧；
- **可飞行**：Genesis 提供物理/时间轴/多传感器；
- **自动采集**：以“规则”为触发（如“靠近桌子”）自动批量采集 `(o_t, a_t, o_{t+1})`；
- **VIO 对接**：ROS Noetic 下，以 **VINS-Fusion (stereo+IMU)** 作为定位源（D435i 30 Hz + Pixhawk 6C Mini 150 Hz）；
- **路径规划**：基于 **3DGS 点云体素化的 3D 占据栅格**，进行 **3维混合 A*** 搜索；
- **可扩展**：替换/插拔 VIO、规划、控制模块。

## 功能概述
- 双目相机挂架（默认面向 **Intel RealSense D435i**：30 Hz，baseline≈0.05 m，可由标定文件覆盖）；
- 3DGS 渲染适配层（OpenCV/OpenGL 坐标；gsplat 或自定义后端）；
- **3D 体素地图**：从 3DGS `.ply`（高斯中心与尺度）或点云生成 3D 占据栅格（支持膨胀/边界裁剪）；
- **3D Hybrid A***：在 3D 栅格中搜索 `(x,y,z,yaw)` 可行路径（离散 yaw）；
- ROS Noetic 桥接：发布 `/cam0`,`/cam1` 图像与 CameraInfo（30 Hz）， `/imu0`（150 Hz），订阅 `/vins_estimator/odometry`；
- 规则引擎（一次性触发 + 邻近判断）；
- 数据输出（左右目 RGB、外参、K、位姿/动作/时间戳）。

## 依赖
- Python 3.9+
- 必需：numpy, pyyaml, plyfile
- 可选：torch, gsplat, opencv-python（非 ROS 环境下图像处理）
- **Genesis**：需按官方指引安装；未安装时，`run_demo.py` 会给出清晰错误。
- **ROS Noetic**（Ubuntu 20.04）：`roscore`、`rospy`、`cv_bridge`、`image_transport`、`sensor_msgs`、`geometry_msgs` 等（使用 apt 安装）。

## 安装
```bash
pip install -e .
# 或最小依赖
pip install -r requirements.txt
```
## 快速开始
```python
vim configs/demo_default.yaml   # 配 URDF/3DGS 路径、相机 YAML
python -m twinuav.run_demo --config configs/demo_default.yaml --viewer
pytest -q                       # 运行无 Genesis 的单元测试
```
